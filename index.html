<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒÙŠ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</title>
    <meta name="theme-color" content="#2c1810">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #2c1810 0%, #3d2b1f 50%, #1a0f0a 100%);
            color: #e8d8c9;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(145deg, #4a3426, #362419);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid #6b4f3a;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #c19a6b, #d4b483, #c19a6b);
        }
        
        header h1 {
            color: #e8d8c9;
            margin-bottom: 15px;
            font-size: 2.8rem;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
            background: linear-gradient(to right, #d4b483, #f5e8d0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        header p {
            color: #d4b483;
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.8;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: linear-gradient(145deg, #3d2b1f, #2c1810);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            border: 1px solid #6b4f3a;
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card h2 {
            color: #e8d8c9;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #c19a6b;
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.8rem;
            font-weight: 600;
        }
        
        .card h2 i {
            color: #d4b483;
            background: rgba(193, 154, 107, 0.2);
            padding: 12px;
            border-radius: 12px;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #d4b483;
            font-size: 1.1rem;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 15px 20px;
            background: rgba(26, 15, 10, 0.7);
            border: 2px solid #6b4f3a;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s;
            color: #e8d8c9;
        }
        
        input::placeholder, textarea::placeholder {
            color: #a08c7a;
        }
        
        input:focus, textarea:focus, select:focus {
            border-color: #c19a6b;
            outline: none;
            box-shadow: 0 0 0 3px rgba(193, 154, 107, 0.3);
        }
        
        textarea {
            min-height: 150px;
            resize: vertical;
            line-height: 1.6;
        }
        
        .btn {
            display: inline-block;
            background: linear-gradient(145deg, #c19a6b, #a67c52);
            color: #2c1810;
            border: none;
            padding: 18px 32px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 18px;
            font-weight: 700;
            transition: all 0.3s;
            width: 100%;
            text-align: center;
            margin-top: 15px;
            box-shadow: 0 5px 15px rgba(193, 154, 107, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(193, 154, 107, 0.4);
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn:active {
            transform: translateY(-1px);
        }
        
        .btn-secondary {
            background: linear-gradient(145deg, #8a9b6e, #6b7a53);
            box-shadow: 0 5px 15px rgba(138, 155, 110, 0.3);
        }
        
        .btn-stop {
            background: linear-gradient(145deg, #b86b6b, #954e4e);
            box-shadow: 0 5px 15px rgba(184, 107, 107, 0.3);
        }
        
        .btn-install {
            background: linear-gradient(145deg, #6b8e9b, #4e6d7a);
            box-shadow: 0 5px 15px rgba(107, 142, 155, 0.3);
        }
        
        .btn-add {
            background: linear-gradient(145deg, #d4b483, #c19a6b);
            width: auto;
            padding: 12px 24px;
            margin-top: 0;
            font-size: 16px;
        }
        
        .btn-remove {
            background: linear-gradient(145deg, #8a7c6b, #6b5e4e);
            width: auto;
            padding: 10px 18px;
            font-size: 14px;
            margin: 5px 0 0 10px;
        }
        
        .status {
            text-align: center;
            padding: 20px;
            border-radius: 12px;
            margin-top: 25px;
            font-weight: 600;
            display: none;
            border: 2px solid transparent;
            font-size: 1.1rem;
        }
        
        .success {
            background: rgba(110, 155, 107, 0.2);
            color: #8acf87;
            border-color: #6e9b6b;
        }
        
        .error {
            background: rgba(155, 107, 107, 0.2);
            color: #cf8787;
            border-color: #9b6b6b;
        }
        
        .info {
            background: rgba(107, 142, 155, 0.2);
            color: #87b6cf;
            border-color: #6b8e9b;
        }
        
        .warning {
            background: rgba(155, 142, 107, 0.2);
            color: #cfc787;
            border-color: #9b8e6b;
        }
        
        .timer-display {
            text-align: center;
            font-size: 1.8rem;
            font-weight: bold;
            margin: 20px 0;
            color: #d4b483;
            direction: ltr;
            background: rgba(26, 15, 10, 0.5);
            padding: 20px;
            border-radius: 15px;
            border: 1px solid #6b4f3a;
        }
        
        .logs-container {
            max-height: 300px;
            overflow-y: auto;
            background: rgba(26, 15, 10, 0.7);
            border-radius: 12px;
            padding: 15px;
            margin-top: 20px;
            border: 1px solid #6b4f3a;
        }
        
        .log-item {
            padding: 12px 15px;
            border-bottom: 1px solid #6b4f3a;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            color: #e8d8c9;
        }
        
        .log-item:last-child {
            border-bottom: none;
        }
        
        .log-time {
            color: #c19a6b;
            margin-right: 15px;
            float: left;
        }
        
        .instructions {
            margin-top: 40px;
            padding: 30px;
            background: linear-gradient(145deg, #3d2b1f, #2c1810);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            border: 1px solid #6b4f3a;
        }
        
        .instructions h3 {
            color: #e8d8c9;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #c19a6b;
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.6rem;
        }
        
        .instructions ol {
            padding-right: 25px;
            margin-bottom: 20px;
        }
        
        .instructions li {
            margin-bottom: 15px;
            color: #d4b483;
            line-height: 1.8;
            padding-right: 10px;
        }
        
        .instructions a {
            color: #c19a6b;
            text-decoration: none;
            font-weight: 600;
            border-bottom: 1px dashed #c19a6b;
            transition: all 0.3s;
        }
        
        .instructions a:hover {
            color: #e8d8c9;
            border-bottom: 1px solid #e8d8c9;
        }
        
        footer {
            text-align: center;
            margin-top: 50px;
            color: #e8d8c9;
            font-size: 1rem;
            padding: 30px;
            background: rgba(26, 15, 10, 0.9);
            border-radius: 15px;
            border-top: 2px solid #c19a6b;
        }
        
        .developer {
            color: #d4b483;
            font-weight: 700;
            font-size: 1.2rem;
            margin: 10px 0;
            letter-spacing: 1px;
        }
        
        .copyright {
            color: #a08c7a;
            margin-top: 15px;
            font-size: 0.9rem;
        }
        
        .required {
            color: #b86b6b;
        }
        
        .config-section {
            background: rgba(26, 15, 10, 0.7);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 25px;
            border-right: 4px solid #c19a6b;
            border-left: 4px solid #c19a6b;
        }
        
        .config-section h4 {
            color: #e8d8c9;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1.3rem;
        }
        
        .email-list {
            background: rgba(26, 15, 10, 0.7);
            padding: 20px;
            border-radius: 12px;
            margin-top: 15px;
            border: 1px solid #6b4f3a;
        }
        
        .email-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            padding: 15px;
            background: rgba(42, 28, 18, 0.8);
            border-radius: 10px;
            border: 1px solid #8a7c6b;
            transition: all 0.3s;
        }
        
        .email-item:hover {
            border-color: #c19a6b;
            background: rgba(54, 36, 25, 0.8);
        }
        
        .email-item:last-child {
            margin-bottom: 0;
        }
        
        .email-input {
            flex: 1;
            margin-bottom: 0;
        }
        
        .email-counter {
            display: inline-block;
            background: linear-gradient(145deg, #c19a6b, #a67c52);
            color: #2c1810;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            text-align: center;
            line-height: 32px;
            font-size: 16px;
            font-weight: bold;
            margin-left: 15px;
            box-shadow: 0 3px 8px rgba(193, 154, 107, 0.3);
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 25px 0;
        }
        
        .stat-item {
            background: linear-gradient(145deg, #3d2b1f, #2c1810);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            border: 1px solid #6b4f3a;
            transition: transform 0.3s;
        }
        
        .stat-item:hover {
            transform: translateY(-5px);
            border-color: #c19a6b;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: bold;
            color: #d4b483;
            margin-bottom: 10px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
        }
        
        .stat-label {
            font-size: 16px;
            color: #a08c7a;
            font-weight: 600;
        }
        
        .background-info {
            background: linear-gradient(145deg, #1a0f0a, #2c1810);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            border: 2px solid #c19a6b;
        }
        
        .background-info h4 {
            color: #d4b483;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .badge {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .badge-success {
            background: #6e9b6b;
            color: #e8d8c9;
        }
        
        .badge-warning {
            background: #9b8e6b;
            color: #e8d8c9;
        }
        
        .badge-error {
            background: #9b6b6b;
            color: #e8d8c9;
        }
        
        @media (max-width: 768px) {
            .stats {
                grid-template-columns: 1fr;
            }
            
            header h1 {
                font-size: 2.2rem;
            }
            
            .card {
                padding: 20px;
            }
        }
        
        /* ØªØ®ØµÙŠØµ Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± */
        ::-webkit-scrollbar {
            width: 10px;
        }
        
        ::-webkit-scrollbar-track {
            background: #2c1810;
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(145deg, #c19a6b, #a67c52);
            border-radius: 5px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(145deg, #d4b483, #c19a6b);
        }
        
        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© */
        .gold-text {
            background: linear-gradient(to right, #d4b483, #f5e8d0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }
        
        .divider {
            height: 1px;
            background: linear-gradient(90deg, transparent, #6b4f3a, transparent);
            margin: 25px 0;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-paper-plane"></i> Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒÙŠ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„</h1>
            <p>Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ø¦Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ø¨Ø´ÙƒÙ„ Ø¯ÙˆØ±ÙŠ Ø¥Ù„Ù‰ 5 Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø®ØªÙ„ÙØ© - ÙŠØ¹Ù…Ù„ Ø­ØªÙ‰ Ø¨Ø¹Ø¯ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø©</p>
        </header>
        
        <div class="background-info">
            <h4><i class="fas fa-info-circle"></i> Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…</h4>
            <div id="systemStatus">
                <span class="badge badge-warning">Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span>
            </div>
            <p style="margin-top: 15px; color: #d4b483;">
                <i class="fas fa-check-circle"></i> Ù‡Ø°Ø§ Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø­ØªÙ‰ Ø¨Ø¹Ø¯ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ØªØµÙØ­
            </p>
        </div>
        
        <div class="main-content">
            <div class="card">
                <h2><i class="fas fa-cog"></i> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</h2>
                
                <div class="config-section">
                    <h4><i class="fas fa-key"></i> Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª EmailJS</h4>
                    <div class="form-group">
                        <label for="publicKey">Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¹Ø§Ù… Ù„Ù€ EmailJS</label>
                        <input type="text" id="publicKey" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¹Ø§Ù… Ù‡Ù†Ø§" value="vIwyJEMK-JDmoeKnD">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="subject">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø© <span class="required">*</span></label>
                    <input type="text" id="subject" placeholder="Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©" value="Ø±Ø³Ø§Ù„Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù…Ù† Ø§Ù„Ù†Ø¸Ø§Ù…" required>
                </div>
                
                <div class="form-group">
                    <label for="message">Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø© <span class="required">*</span></label>
                    <textarea id="message" placeholder="Ø§ÙƒØªØ¨ Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù‡Ù†Ø§..." required>Ø§Ù„Ø³Ø§Ø¯Ø© Ø§Ù„ÙƒØ±Ø§Ù…ØŒ

ØªØ­ÙŠØ© Ø·ÙŠØ¨Ø© ÙˆØ¨Ø¹Ø¯ØŒ

Ù†Ù‡Ø¯ÙŠÙƒÙ… Ø£Ø·ÙŠØ¨ Ø§Ù„ØªØ­ÙŠØ§Øª Ø¹Ø¨Ø± Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠØ©.
Ù‡Ø°Ù‡ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ø¬Ø²Ø¡ Ù…Ù† Ù†Ø¸Ø§Ù… Ø¥Ø±Ø³Ø§Ù„ Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒÙŠ.

ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„:
ğŸ“… Ø§Ù„ØªØ§Ø±ÙŠØ®: {date}
â° Ø§Ù„ÙˆÙ‚Øª: {time}
ğŸ†” Ø±Ù‚Ù… Ø§Ù„Ø±Ø³Ø§Ù„Ø©: {count}
ğŸ“§ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: {email}
ğŸ”¢ Ø§Ù„ØªØ±ØªÙŠØ¨ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©: {index}

ÙŠÙ…ÙƒÙ†ÙƒÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© ÙÙŠ Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø©:
{date} - ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
{time} - ÙˆÙ‚Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
{count} - Ø±Ù‚Ù… Ø§Ù„Ø±Ø³Ø§Ù„Ø©
{email} - Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ù…Ø³ØªÙ„Ù…
{index} - Ø±Ù‚Ù… Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© (1-5)

Ù…Ø¹ Ø£Ø·ÙŠØ¨ Ø§Ù„ØªØ­ÙŠØ§ØªØŒ
Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒÙŠ</textarea>
                </div>
                
                <div class="form-group">
                    <label>Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Ø­ØªÙ‰ 5 Ø¹Ù†Ø§ÙˆÙŠÙ†) <span class="required">*</span></label>
                    <div class="email-list" id="emailList">
                        <!-- Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù‡Ù†Ø§ -->
                    </div>
                    <button type="button" id="addEmailBtn" class="btn-add"><i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</button>
                    <p style="margin-top: 15px; font-size: 14px; color: #a08c7a;">ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø­ØªÙ‰ 5 Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</p>
                </div>
                
                <div class="form-group">
                    <label for="interval">Ø§Ù„ÙØªØ±Ø© Ø§Ù„Ø²Ù…Ù†ÙŠØ© Ø¨ÙŠÙ† Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</label>
                    <select id="interval">
                        <option value="0.5">ÙƒÙ„ 30 Ø«Ø§Ù†ÙŠØ© (Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±)</option>
                        <option value="1">ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©</option>
                        <option value="5" selected>ÙƒÙ„ 5 Ø¯Ù‚Ø§Ø¦Ù‚</option>
                        <option value="10">ÙƒÙ„ 10 Ø¯Ù‚Ø§Ø¦Ù‚</option>
                        <option value="15">ÙƒÙ„ 15 Ø¯Ù‚ÙŠÙ‚Ø©</option>
                        <option value="30">ÙƒÙ„ 30 Ø¯Ù‚ÙŠÙ‚Ø©</option>
                        <option value="60">ÙƒÙ„ Ø³Ø§Ø¹Ø©</option>
                    </select>
                </div>
                
                <button id="startBtn" class="btn"><i class="fas fa-play"></i> Ø¨Ø¯Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†</button>
                <button id="stopBtn" class="btn btn-stop"><i class="fas fa-stop"></i> Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ</button>
                <button id="testAllBtn" class="btn btn-secondary"><i class="fas fa-paper-plane"></i> Ø¥Ø±Ø³Ø§Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†</button>
                <button id="installBtn" class="btn btn-install" style="display: none;"><i class="fas fa-download"></i> ØªØ«Ø¨ÙŠØª ÙƒØªØ·Ø¨ÙŠÙ‚</button>
                
                <div id="status" class="status"></div>
            </div>
            
            <div class="card">
                <h2><i class="fas fa-chart-line"></i> Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª</h2>
                
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="statSent">0</div>
                        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ù…Ø±Ø³Ù„Ø©</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="statActive">0</div>
                        <div class="stat-label">Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ù†Ø´Ø·Ø©</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="statFailed">0</div>
                        <div class="stat-label">Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø¥Ø±Ø³Ø§Ù„ ÙØ§Ø´Ù„Ø©</div>
                    </div>
                </div>
                
                <div class="timer-display">
                    <div id="timer">Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ: --:--</div>
                    <div id="counter">Ø¹Ø¯Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: 0</div>
                    <div id="backgroundStatus" style="font-size: 1rem; margin-top: 10px; color: #8acf87;"></div>
                </div>
                
                <div class="divider"></div>
                
                <div class="form-group">
                    <label>Ø³Ø¬Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ</label>
                    <div class="logs-container" id="logs">
                        <div class="log-item">Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§...</div>
                    </div>
                </div>
                
                <div class="form-group">
                    <button id="clearLogsBtn" class="btn"><i class="fas fa-trash"></i> ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø³Ø¬Ù„Ø§Øª</button>
                    <button id="saveConfigBtn" class="btn btn-secondary"><i class="fas fa-save"></i> Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
                </div>
            </div>
        </div>
        
        <div class="instructions card">
            <h3><i class="fas fa-info-circle"></i> Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹</h3>
            <ol>
                <li>Ù‚Ù… Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ Ø­Ø³Ø§Ø¨ <span class="gold-text">EmailJS</span> Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ</li>
                <li>Ø§Ù†Ø³Ø® <span class="gold-text">Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¹Ø§Ù…</span> Ù…Ù† Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… ÙˆØ£Ø¯Ø®Ù„Ù‡ ÙÙŠ Ø§Ù„Ø­Ù‚Ù„ Ø§Ù„Ù…Ø®ØµØµ</li>
                <li>ØªØ£ÙƒØ¯ Ù…Ù† ÙˆØ¬ÙˆØ¯ Ø®Ø¯Ù…Ø© Ø¨Ø§Ø³Ù… <code>service_sv1ialy</code> ÙˆÙ‚Ø§Ù„Ø¨ Ø¨Ø§Ø³Ù… <code>template_797tjor</code></li>
                <li>ÙÙŠ Ù‚Ø§Ù„Ø¨ EmailJSØŒ Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:
                    <ul style="margin-top: 10px; padding-right: 20px;">
                        <li><code>{{to_email}}</code> - Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ù…Ø³ØªÙ„Ù…</li>
                        <li><code>{{subject}}</code> - Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø±Ø³Ø§Ù„Ø©</li>
                        <li><code>{{message}}</code> - Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø©</li>
                        <li><code>{{time}}</code> - ÙˆÙ‚Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</li>
                        <li><code>{{date}}</code> - ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø±Ø³Ø§Ù„</li>
                        <li><code>{{count}}</code> - Ø±Ù‚Ù… Ø§Ù„Ø±Ø³Ø§Ù„Ø©</li>
                        <li><code>{{index}}</code> - Ø±Ù‚Ù… Ø§Ù„Ø¨Ø±ÙŠØ¯ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</li>
                    </ul>
                </li>
                <li>Ø£Ø¶Ù Ø­ØªÙ‰ 5 Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆØ§Ø®ØªØ¨Ø± Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠ</li>
            </ol>
            
            <div class="divider"></div>
            
            <h3 style="margin-top: 25px;"><i class="fas fa-tools"></i> Ù…Ø¹Ø±Ù‘ÙØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…</h3>
            <div class="config-section">
                <p><strong><i class="fas fa-server"></i> Ù…Ø¹Ø±Ù‘Ù Ø§Ù„Ø®Ø¯Ù…Ø©:</strong> <code>service_sv1ialy</code></p>
                <p><strong><i class="fas fa-file-alt"></i> Ù…Ø¹Ø±Ù‘Ù Ø§Ù„Ù‚Ø§Ù„Ø¨:</strong> <code>template_797tjor</code></p>
                <p><strong><i class="fas fa-key"></i> Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¹Ø§Ù…:</strong> Ø£Ø¯Ø®Ù„Ù‡ ÙÙŠ Ø§Ù„Ø­Ù‚Ù„ Ø¨Ø§Ù„Ø£Ø¹Ù„Ù‰</p>
            </div>
        </div>
        
        <div class="instructions card">
            <h3><i class="fas fa-mobile-alt"></i> ÙƒÙŠÙÙŠØ© ØªØ«Ø¨ÙŠØª Ø§Ù„Ù†Ø¸Ø§Ù… ÙƒØªØ·Ø¨ÙŠÙ‚</h3>
            <ol>
                <li><strong>Ù„Ù…ØªØµÙØ­ ÙƒØ±ÙˆÙ…:</strong>
                    <ul style="margin-top: 10px; padding-right: 20px;">
                        <li>Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø²Ø± <span class="gold-text">"ØªØ«Ø¨ÙŠØª ÙƒØªØ·Ø¨ÙŠÙ‚"</span> Ø§Ù„Ø°ÙŠ Ø³ÙŠØ¸Ù‡Ø± Ø£Ø¹Ù„Ù‰ Ø§Ù„ØµÙØ­Ø©</li>
                        <li>Ø£Ùˆ Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ â‹® (Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©) â†’ "ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚"</li>
                    </ul>
                </li>
                <li><strong>Ù„Ù…ØªØµÙØ­ Ø³ÙØ§Ø±ÙŠ:</strong>
                    <ul style="margin-top: 10px; padding-right: 20px;">
                        <li>Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© ğŸ“¤</li>
                        <li>Ø§Ø®ØªØ± <span class="gold-text">"Ø¥Ø¶Ø§ÙØ© Ø¥Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"</span></li>
                    </ul>
                </li>
                <li><strong>Ø¨Ø¹Ø¯ Ø§Ù„ØªØ«Ø¨ÙŠØª:</strong>
                    <ul style="margin-top: 10px; padding-right: 20px;">
                        <li>Ø³ÙŠØ¹Ù…Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø­ØªÙ‰ Ø¨Ø¹Ø¯ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ØªØµÙØ­</li>
                        <li>Ø³ÙŠØ³ØªÙ…Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©</li>
                        <li>ÙŠÙ…ÙƒÙ†Ùƒ ÙØªØ­ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ù…Ù† Ø£ÙŠÙ‚ÙˆÙ†ØªÙ‡ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</li>
                    </ul>
                </li>
            </ol>
        </div>
        
        <footer>
            <div class="developer">Developed By Ibrahim Al Sharkawi</div>
            <div class="copyright">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2026</div>
        </footer>
    </div>

    <script>
        // Ø¹Ù†Ø§ØµØ± DOM
        const publicKeyInput = document.getElementById('publicKey');
        const emailListContainer = document.getElementById('emailList');
        const subjectInput = document.getElementById('subject');
        const messageInput = document.getElementById('message');
        const intervalSelect = document.getElementById('interval');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const testAllBtn = document.getElementById('testAllBtn');
        const addEmailBtn = document.getElementById('addEmailBtn');
        const clearLogsBtn = document.getElementById('clearLogsBtn');
        const saveConfigBtn = document.getElementById('saveConfigBtn');
        const statusDiv = document.getElementById('status');
        const timerDisplay = document.getElementById('timer');
        const counterDisplay = document.getElementById('counter');
        const logsContainer = document.getElementById('logs');
        const installBtn = document.getElementById('installBtn');
        const systemStatus = document.getElementById('systemStatus');
        const backgroundStatus = document.getElementById('backgroundStatus');
        
        // Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        const statSent = document.getElementById('statSent');
        const statActive = document.getElementById('statActive');
        const statFailed = document.getElementById('statFailed');
        
        // Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ­ÙƒÙ…
        let timer = null;
        let sendCount = 0;
        let failedCount = 0;
        let nextSendTime = null;
        let isRunning = false;
        let emailList = [];
        let isEmailJSInitialized = false;
        let deferredPrompt = null;
        let serviceWorkerRegistration = null;
        let isServiceWorkerReady = false;
        
        // Ù…Ø¹Ø±ÙØ§Øª EmailJS Ø§Ù„Ø«Ø§Ø¨ØªØ©
        const EMAILJS_SERVICE_ID = "service_sv1ialy";
        const EMAILJS_TEMPLATE_ID = "template_797tjor";
        
        // 1. ØªØ³Ø¬ÙŠÙ„ Service Worker
        async function initServiceWorker() {
            if ('serviceWorker' in navigator) {
                try {
                    serviceWorkerRegistration = await navigator.serviceWorker.register('service-worker.js');
                    
                    // ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
                    updateSystemStatus('success', 'Service Worker Ù†Ø´Ø· - Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©');
                    backgroundStatus.textContent = "ğŸŸ¢ Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©";
                    backgroundStatus.style.color = "#8acf87";
                    
                    // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ù…Ù† Service Worker
                    navigator.serviceWorker.addEventListener('message', (event) => {
                        const { type, data } = event.data;
                        
                        if (type === 'UPDATE_STATUS') {
                            sendCount = data.sendCount;
                            updateCounter();
                            
                            if (data.nextSendTime) {
                                nextSendTime = new Date(data.nextSendTime);
                                updateTimer();
                            }
                        }
                    });
                    
                    isServiceWorkerReady = true;
                    addLog("Service Worker Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©", "success");
                } catch (error) {
                    console.error('Service Worker registration failed:', error);
                    updateSystemStatus('warning', 'Service Worker ØºÙŠØ± Ù†Ø´Ø· - Ø§Ù„Ù†Ø¸Ø§Ù… ÙŠØ¹Ù…Ù„ ÙÙ‚Ø· Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©');
                    backgroundStatus.textContent = "ğŸŸ¡ ÙŠØ¹Ù…Ù„ ÙÙ‚Ø· Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©";
                    backgroundStatus.style.color = "#cfc787";
                    addLog("ØªØ¹Ø°Ø± ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©", "error");
                }
            } else {
                updateSystemStatus('warning', 'Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Service Worker');
                backgroundStatus.textContent = "ğŸŸ¡ Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ø¹Ù…Ù„ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©";
                backgroundStatus.style.color = "#cfc787";
            }
        }
        
        // 2. ØªØ­Ø¯ÙŠØ« Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
        function updateSystemStatus(type, message) {
            systemStatus.innerHTML = '';
            const badge = document.createElement('span');
            badge.className = `badge badge-${type}`;
            badge.textContent = message;
            systemStatus.appendChild(badge);
        }
        
        // 3. ØªÙ‡ÙŠØ¦Ø© Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
        function initEmailList() {
            for (let i = 0; i < 3; i++) {
                addEmailField();
            }
        }
        
        // 4. Ø¥Ø¶Ø§ÙØ© Ø­Ù‚Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¬Ø¯ÙŠØ¯
        function addEmailField() {
            if (emailList.length >= 5) {
                showStatus("ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø­ØªÙ‰ 5 Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙÙ‚Ø·", "error");
                return;
            }
            
            const index = emailList.length + 1;
            const emailId = `email_${index}`;
            
            const emailItem = document.createElement('div');
            emailItem.className = 'email-item';
            emailItem.id = `emailItem_${index}`;
            
            emailItem.innerHTML = `
                <span class="email-counter">${index}</span>
                <input type="email" 
                       class="email-input" 
                       id="${emailId}" 
                       placeholder="Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ${index}" 
                       data-index="${index}">
                ${index > 1 ? `<button type="button" class="btn-remove" onclick="removeEmailField(${index})"><i class="fas fa-times"></i></button>` : ''}
            `;
            
            emailListContainer.appendChild(emailItem);
            emailList.push({ id: emailId, value: '', index: index });
            
            const inputField = document.getElementById(emailId);
            inputField.addEventListener('input', function() {
                updateEmailValue(index - 1, this.value);
                saveToLocalStorage();
            });
            
            updateStats();
            return emailId;
        }
        
        // 5. Ø¥Ø²Ø§Ù„Ø© Ø­Ù‚Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
        function removeEmailField(index) {
            if (index <= 1 || index > emailList.length) return;
            
            const emailItem = document.getElementById(`emailItem_${index}`);
            if (emailItem) {
                emailListContainer.removeChild(emailItem);
                emailList.splice(index - 1, 1);
                
                renumberEmailFields();
                updateStats();
                saveToLocalStorage();
            }
        }
        
        // 6. Ø¥Ø¹Ø§Ø¯Ø© ØªØ±Ù‚ÙŠÙ… Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
        function renumberEmailFields() {
            const emailItems = emailListContainer.querySelectorAll('.email-item');
            emailList = [];
            
            emailItems.forEach((item, idx) => {
                const index = idx + 1;
                const counter = item.querySelector('.email-counter');
                const input = item.querySelector('input');
                const removeBtn = item.querySelector('.btn-remove');
                
                counter.textContent = index;
                input.placeholder = `Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ${index}`;
                input.id = `email_${index}`;
                input.setAttribute('data-index', index);
                
                if (removeBtn) {
                    removeBtn.onclick = function() { removeEmailField(index); };
                }
                
                emailList.push({ id: `email_${index}`, value: input.value, index: index });
            });
        }
        
        // 7. ØªØ­Ø¯ÙŠØ« Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        function updateEmailValue(index, value) {
            if (index >= 0 && index < emailList.length) {
                emailList[index].value = value.trim();
            }
        }
        
        // 8. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„ØµØ§Ù„Ø­Ø©
        function getValidEmails() {
            return emailList
                .filter(item => item.value && isValidEmail(item.value))
                .map(item => item.value);
        }
        
        // 9. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        // 10. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        function updateStats() {
            const validEmails = getValidEmails();
            statActive.textContent = validEmails.length;
            statSent.textContent = sendCount;
            statFailed.textContent = failedCount;
        }
        
        // 11. ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
        function loadFromLocalStorage() {
            const savedPublicKey = localStorage.getItem('autoEmailSender_publicKey');
            const savedSubject = localStorage.getItem('autoEmailSender_subject');
            const savedMessage = localStorage.getItem('autoEmailSender_message');
            const savedInterval = localStorage.getItem('autoEmailSender_interval');
            const savedCount = localStorage.getItem('autoEmailSender_count');
            const savedFailed = localStorage.getItem('autoEmailSender_failed');
            const savedLogs = localStorage.getItem('autoEmailSender_logs');
            const savedEmails = localStorage.getItem('autoEmailSender_emails');
            
            if (savedPublicKey) publicKeyInput.value = savedPublicKey;
            if (savedSubject) subjectInput.value = savedSubject;
            if (savedMessage) messageInput.value = savedMessage;
            if (savedInterval) intervalSelect.value = savedInterval;
            if (savedCount) {
                sendCount = parseInt(savedCount);
                counterDisplay.textContent = `Ø¹Ø¯Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: ${sendCount}`;
            }
            if (savedFailed) {
                failedCount = parseInt(savedFailed);
            }
            
            if (savedLogs) {
                logsContainer.innerHTML = savedLogs;
            }
            
            if (savedEmails) {
                try {
                    const emails = JSON.parse(savedEmails);
                    emails.forEach((email, index) => {
                        if (index < emailList.length) {
                            const input = document.getElementById(emailList[index].id);
                            if (input && email) {
                                input.value = email;
                                updateEmailValue(index, email);
                            }
                        }
                    });
                } catch (e) {
                    console.error("Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:", e);
                }
            }
            
            if (savedPublicKey && savedPublicKey.trim() !== '') {
                initEmailJS();
            }
            
            updateStats();
        }
        
        // 12. Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ
        function saveToLocalStorage() {
            const emails = emailList.map(item => item.value);
            
            localStorage.setItem('autoEmailSender_publicKey', publicKeyInput.value);
            localStorage.setItem('autoEmailSender_subject', subjectInput.value);
            localStorage.setItem('autoEmailSender_message', messageInput.value);
            localStorage.setItem('autoEmailSender_interval', intervalSelect.value);
            localStorage.setItem('autoEmailSender_count', sendCount.toString());
            localStorage.setItem('autoEmailSender_failed', failedCount.toString());
            localStorage.setItem('autoEmailSender_logs', logsContainer.innerHTML);
            localStorage.setItem('autoEmailSender_emails', JSON.stringify(emails));
        }
        
        // 13. Ø¥Ø¶Ø§ÙØ© Ø³Ø¬Ù„ Ø¬Ø¯ÙŠØ¯
        function addLog(message, type = 'info') {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ar-EG');
            const logItem = document.createElement('div');
            logItem.className = 'log-item';
            
            let typeIcon = 'ğŸ“';
            if (type === 'success') typeIcon = 'âœ…';
            if (type === 'error') typeIcon = 'âŒ';
            
            logItem.innerHTML = `<span class="log-time">${timeString}</span> ${typeIcon} <span class="log-${type}">${message}</span>`;
            
            logsContainer.insertBefore(logItem, logsContainer.firstChild);
            
            saveToLocalStorage();
        }
        
        // 14. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯
        function updateCounter() {
            counterDisplay.textContent = `Ø¹Ø¯Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: ${sendCount}`;
            updateStats();
        }
        
        // 15. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…Ø¤Ù‚Øª
        function updateTimer() {
            if (!nextSendTime) return;
            
            const now = new Date();
            const diff = nextSendTime - now;
            
            if (diff <= 0) {
                timerDisplay.textContent = "Ø¬Ø§Ø±Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...";
                return;
            }
            
            const minutes = Math.floor(diff / 60000);
            const seconds = Math.floor((diff % 60000) / 1000);
            
            timerDisplay.textContent = `Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // 16. ØªÙ‡ÙŠØ¦Ø© EmailJS
        function initEmailJS() {
            const publicKey = publicKeyInput.value.trim();
            if (!publicKey) {
                return false;
            }
            
            try {
                emailjs.init(publicKey);
                isEmailJSInitialized = true;
                addLog("ØªÙ… ØªÙ‡ÙŠØ¦Ø© EmailJS Ø¨Ù†Ø¬Ø§Ø­", "success");
                return true;
            } catch (error) {
                console.error("ÙØ´Ù„ ØªÙ‡ÙŠØ¦Ø© EmailJS:", error);
                isEmailJSInitialized = false;
                addLog("ÙØ´Ù„ ØªÙ‡ÙŠØ¦Ø© EmailJSØŒ ØªØ£ÙƒØ¯ Ù…Ù† Ø§Ù„Ù…ÙØªØ§Ø­", "error");
                return false;
            }
        }
        
        // 17. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª EmailJS
        function validateEmailJSConfig() {
            const publicKey = publicKeyInput.value.trim();
            if (!publicKey) {
                showStatus("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ EmailJS Ø§Ù„Ø¹Ø§Ù…", "error");
                return false;
            }
            
            const validEmails = getValidEmails();
            if (validEmails.length === 0) {
                showStatus("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆØ§Ø­Ø¯ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„", "error");
                return false;
            }
            
            if (!subjectInput.value.trim()) {
                showStatus("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† Ù„Ù„Ø±Ø³Ø§Ù„Ø©", "error");
                return false;
            }
            
            if (!messageInput.value.trim()) {
                showStatus("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù†Øµ Ø§Ù„Ø±Ø³Ø§Ù„Ø©", "error");
                return false;
            }
            
            if (!isEmailJSInitialized) {
                if (!initEmailJS()) {
                    showStatus("Ù…ÙØªØ§Ø­ EmailJS ØºÙŠØ± ØµØ§Ù„Ø­", "error");
                    return false;
                }
            }
            
            return true;
        }
        
        // 18. Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¥Ù„Ù‰ Ø¹Ù†ÙˆØ§Ù† Ù…Ø­Ø¯Ø¯
        async function sendEmailToAddress(email, emailIndex) {
            const subject = subjectInput.value.trim();
            let message = messageInput.value.trim();
            
            const now = new Date();
            const timeString = now.toLocaleTimeString('ar-EG');
            const dateString = now.toLocaleDateString('ar-EG');
            
            message = message
                .replace(/{time}/g, timeString)
                .replace(/{date}/g, dateString)
                .replace(/{count}/g, sendCount + 1)
                .replace(/{email}/g, email)
                .replace(/{index}/g, emailIndex);
            
            try {
                const templateParams = {
                    to_email: email,
                    subject: subject,
                    message: message,
                    time: timeString,
                    date: dateString,
                    count: sendCount + 1,
                    index: emailIndex
                };
                
                const response = await emailjs.send(
                    EMAILJS_SERVICE_ID,
                    EMAILJS_TEMPLATE_ID,
                    templateParams
                );
                
                return { success: true, email: email };
                
            } catch (error) {
                console.error(`ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¥Ù„Ù‰ ${email}:`, error);
                return { success: false, email: email, error: error };
            }
        }
        
        // 19. Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ Ø¥Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ†
        async function sendToAllEmails() {
            if (!validateEmailJSConfig()) {
                return { success: false, sent: 0, total: 0 };
            }
            
            const validEmails = getValidEmails();
            if (validEmails.length === 0) {
                showStatus("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ§Ù„Ø­Ø© Ù„Ù„Ø¥Ø±Ø³Ø§Ù„", "error");
                return { success: false, sent: 0, total: 0 };
            }
            
            let successfulSends = 0;
            let failedSends = 0;
            
            for (let i = 0; i < validEmails.length; i++) {
                const email = validEmails[i];
                const emailIndex = i + 1;
                
                const result = await sendEmailToAddress(email, emailIndex);
                
                if (result.success) {
                    successfulSends++;
                    sendCount++;
                    addLog(`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© #${sendCount} Ø¥Ù„Ù‰ ${email}`, 'success');
                } else {
                    failedSends++;
                    failedCount++;
                    addLog(`ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© Ø¥Ù„Ù‰ ${email}: ${result.error?.text || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}`, 'error');
                }
                
                await new Promise(resolve => setTimeout(resolve, 1000));
            }
            
            updateCounter();
            
            if (successfulSends > 0) {
                showStatus(`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ${successfulSends} Ø±Ø³Ø§Ù„Ø© Ø¨Ù†Ø¬Ø§Ø­!`, "success");
                saveToLocalStorage();
            }
            
            if (failedSends > 0) {
                addLog(`ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ ${failedSends} Ø±Ø³Ø§Ù„Ø©`, 'error');
            }
            
            return { 
                success: successfulSends > 0, 
                sent: successfulSends, 
                total: validEmails.length,
                failed: failedSends 
            };
        }
        
        // 20. Ø¨Ø¯Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ (Ø§Ù„Ø¥ØµØ¯Ø§Ø± Ø§Ù„Ø¬Ø¯ÙŠØ¯ Ù…Ø¹ Service Worker)
        async function startAutoSending() {
            if (isRunning) {
                showStatus("Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙŠØ¹Ù…Ù„ Ø¨Ø§Ù„ÙØ¹Ù„", "info");
                return;
            }
            
            if (!validateEmailJSConfig()) {
                return;
            }
            
            const validEmails = getValidEmails();
            if (validEmails.length === 0) {
                showStatus("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ§Ù„Ø­Ø© Ù„Ù„Ø¥Ø±Ø³Ø§Ù„", "error");
                return;
            }
            
            if (isServiceWorkerReady) {
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… Service Worker Ù„Ù„Ø¥Ø±Ø³Ø§Ù„ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©
                const intervalMinutes = parseFloat(intervalSelect.value);
                const now = new Date();
                const nextSend = new Date(now.getTime() + intervalMinutes * 60000);
                
                if (navigator.serviceWorker.controller) {
                    navigator.serviceWorker.controller.postMessage({
                        type: 'START_SENDING',
                        data: {
                            publicKey: publicKeyInput.value.trim(),
                            emails: validEmails,
                            subject: subjectInput.value.trim(),
                            message: messageInput.value.trim(),
                            interval: intervalMinutes,
                            nextSendTime: nextSend.getTime(),
                            sendCount: sendCount
                        }
                    });
                }
                
                isRunning = true;
                startBtn.disabled = true;
                stopBtn.disabled = false;
                nextSendTime = nextSend;
                
                clearInterval(timer);
                timer = setInterval(updateTimer, 1000);
                
                addLog(`Ø¨Ø¯Ø£ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© ÙƒÙ„ ${intervalMinutes} Ø¯Ù‚ÙŠÙ‚Ø©`, "success");
                showStatus(`Ø¨Ø¯Ø£ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© Ø¥Ù„Ù‰ ${validEmails.length} Ø¹Ù†ÙˆØ§Ù†`, "success");
                backgroundStatus.textContent = "ğŸŸ¢ ÙŠØ¹Ù…Ù„ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ© - Ø³ÙŠÙ…Ù„ Ø­ØªÙ‰ Ø¨Ø¹Ø¯ Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„ØµÙØ­Ø©";
                backgroundStatus.style.color = "#8acf87";
            } else {
                // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©
                showStatus("Ø¬Ø§Ø±Ù Ø¨Ø¯Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ...", "info");
                
                isRunning = true;
                startBtn.disabled = true;
                stopBtn.disabled = false;
                
                const result = await sendToAllEmails();
                
                if (result.sent > 0 || result.success) {
                    const intervalMinutes = parseFloat(intervalSelect.value);
                    scheduleNextSend(intervalMinutes);
                    
                    clearInterval(timer);
                    timer = setInterval(updateTimer, 1000);
                    
                    addLog(`Ø¨Ø¯Ø£ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙƒÙ„ ${intervalMinutes} Ø¯Ù‚ÙŠÙ‚Ø©`, "info");
                    showStatus(`Ø¨Ø¯Ø£ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¥Ù„Ù‰ ${validEmails.length} Ø¹Ù†ÙˆØ§Ù†`, "success");
                    backgroundStatus.textContent = "ğŸŸ¡ ÙŠØ¹Ù…Ù„ ÙÙ‚Ø· Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©";
                    backgroundStatus.style.color = "#cfc787";
                } else {
                    isRunning = false;
                    startBtn.disabled = false;
                    stopBtn.disabled = true;
                }
            }
        }
        
        // 21. Ø¬Ø¯ÙˆÙ„Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ (Ù„Ù„Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø©)
        function scheduleNextSend(intervalMinutes) {
            const now = new Date();
            nextSendTime = new Date(now.getTime() + intervalMinutes * 60000);
            updateTimer();
            
            setTimeout(async () => {
                if (isRunning) {
                    const result = await sendToAllEmails();
                    if (result.sent > 0 || result.success) {
                        scheduleNextSend(intervalMinutes);
                    } else {
                        addLog("ØªÙˆÙ‚Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¨Ø³Ø¨Ø¨ ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…ØªÙƒØ±Ø±", "error");
                        stopAutoSending();
                    }
                }
            }, intervalMinutes * 60000);
        }
        
        // 22. Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ
        function stopAutoSending() {
            isRunning = false;
            startBtn.disabled = false;
            stopBtn.disabled = true;
            
            if (navigator.serviceWorker.controller) {
                navigator.serviceWorker.controller.postMessage({
                    type: 'STOP_SENDING'
                });
            }
            
            clearInterval(timer);
            timerDisplay.textContent = "Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ: --:--";
            nextSendTime = null;
            
            addLog("ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ", "info");
            showStatus("ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ", "info");
            backgroundStatus.textContent = "â¹ï¸ Ù…ØªÙˆÙ‚Ù";
            backgroundStatus.style.color = "#cf8787";
        }
        
        // 23. Ø¹Ø±Ø¶ Ø­Ø§Ù„Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
        function showStatus(message, type) {
            statusDiv.textContent = message;
            statusDiv.className = `status ${type}`;
            statusDiv.style.display = 'block';
            
            setTimeout(() => {
                statusDiv.style.display = 'none';
            }, 5000);
        }
        
        // 24. Ù…Ø³Ø­ Ø³Ø¬Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
        function clearLogs() {
            if (confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø³Ø¬Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ØŸ")) {
                logsContainer.innerHTML = '<div class="log-item">Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§...</div>';
                saveToLocalStorage();
                showStatus("ØªÙ… Ù…Ø³Ø­ Ø³Ø¬Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„", "info");
            }
        }
        
        // 25. ØªÙØ¹ÙŠÙ„ Ø²Ø± ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        function setupInstallButton() {
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                deferredPrompt = e;
                installBtn.style.display = 'block';
                
                installBtn.addEventListener('click', async () => {
                    if (deferredPrompt) {
                        deferredPrompt.prompt();
                        const { outcome } = await deferredPrompt.userChoice;
                        
                        if (outcome === 'accepted') {
                            addLog("ØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù†Ø¬Ø§Ø­", "success");
                            installBtn.style.display = 'none';
                            showStatus("ØªÙ… ØªØ«Ø¨ÙŠØª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù†Ø¬Ø§Ø­!", "success");
                        }
                        deferredPrompt = null;
                    }
                });
            });
        }
        
        // 26. Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        function setupEventListeners() {
            startBtn.addEventListener('click', startAutoSending);
            stopBtn.addEventListener('click', stopAutoSending);
            
            testAllBtn.addEventListener('click', async () => {
                if (!validateEmailJSConfig()) {
                    return;
                }
                
                const validEmails = getValidEmails();
                if (validEmails.length === 0) {
                    showStatus("Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù†Ø§ÙˆÙŠÙ† Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ§Ù„Ø­Ø© Ù„Ù„Ø¥Ø±Ø³Ø§Ù„", "error");
                    return;
                }
                
                showStatus(`Ø¬Ø§Ø±Ù Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¥Ù„Ù‰ ${validEmails.length} Ø¹Ù†ÙˆØ§Ù†...`, "info");
                const result = await sendToAllEmails();
                
                if (result.sent > 0) {
                    showStatus(`ØªÙ… Ø¥Ø±Ø³Ø§Ù„ ${result.sent} Ø±Ø³Ø§Ù„Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­! ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨Ø±ÙŠØ¯Ùƒ.`, "success");
                } else {
                    showStatus(`ÙØ´Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ©`, "error");
                }
            });
            
            addEmailBtn.addEventListener('click', function() {
                addEmailField();
                saveToLocalStorage();
            });
            
            clearLogsBtn.addEventListener('click', clearLogs);
            
            saveConfigBtn.addEventListener('click', () => {
                saveToLocalStorage();
                showStatus("ØªÙ… Ø­ÙØ¸ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!", "success");
            });
            
            publicKeyInput.addEventListener('input', () => {
                isEmailJSInitialized = false;
                const key = publicKeyInput.value.trim();
                if (key && key.length > 10) {
                    try {
                        if (initEmailJS()) {
                            addLog("ØªÙ… ØªØ­Ø¯ÙŠØ« Ù…ÙØªØ§Ø­ Ø§Ù„Ù†Ø¸Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­", "success");
                            showStatus("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„Ø¹Ø§Ù… Ø¨Ù†Ø¬Ø§Ø­", "success");
                        } else {
                            addLog("Ù…ÙØªØ§Ø­ Ø§Ù„Ù†Ø¸Ø§Ù… ØºÙŠØ± ØµØ§Ù„Ø­", "error");
                        }
                    } catch (error) {
                        addLog("Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…ÙØªØ§Ø­", "error");
                    }
                }
            });
            
            subjectInput.addEventListener('input', saveToLocalStorage);
            messageInput.addEventListener('input', saveToLocalStorage);
            intervalSelect.addEventListener('change', saveToLocalStorage);
        }
        
        // 27. ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        async function init() {
            initEmailList();
            loadFromLocalStorage();
            setupEventListeners();
            setupInstallButton();
            stopBtn.disabled = true;
            
            await initServiceWorker();
            
            setTimeout(() => {
                if (publicKeyInput.value.trim()) {
                    initEmailJS();
                }
                showStatus("Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ù†Ø¸Ø§Ù… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø£ÙˆØªÙˆÙ…Ø§ØªÙŠÙƒÙŠ Ø§Ù„Ù…ØªÙƒØ§Ù…Ù„! Ø£Ø¯Ø®Ù„ Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙˆØ§Ø®ØªØ¨Ø± Ø§Ù„Ù†Ø¸Ø§Ù… Ø£ÙˆÙ„Ø§Ù‹.", "info");
            }, 1000);
        }
        
        // Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
        document.addEventListener('DOMContentLoaded', init);
        
        // Ø¬Ø¹Ù„ Ø§Ù„Ø¯ÙˆØ§Ù„ Ù…ØªØ§Ø­Ø© Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ HTML
        window.removeEmailField = removeEmailField;
    </script>
</body>
</html>